function(deploy_msvc)
    if(MSVC)
        if(${MSVC_TOOLSET_VERSION} GREATER_EQUAL 142)
            set(VC_REDIST_DIR $ENV{VCToolsRedistDir}$ENV{Platform}/Microsoft.VC${MSVC_TOOLSET_VERSION}.CRT CACHE STRING "Location of the runtime")
            string(REPLACE "\\" "/" VC_REDIST_DIR ${VC_REDIST_DIR})
            message(STATUS ${VC_REDIST_DIR})

            install (FILES ${VC_REDIST_DIR}/msvcp140.dll DESTINATION "./")
            install (FILES ${VC_REDIST_DIR}/msvcp140_1.dll DESTINATION "./" OPTIONAL)
            #install (FILES ${VC_REDIST_DIR}/msvcp140_2.dll DESTINATION "./" OPTIONAL)
            install (FILES ${VC_REDIST_DIR}/vcruntime140.dll DESTINATION "./")
            install (FILES ${VC_REDIST_DIR}/vcruntime140_1.dll DESTINATION "./" OPTIONAL)
        endif()
    endif()
endfunction()

function(deploy_qt)
    message(STATUS qt_version_${QT_VERSION_MAJOR})
    if (WIN32)
        if (NOT "${Qt5Core_VERSION}" STREQUAL "")
            install (FILES ${CMAKE_PREFIX_PATH}/bin/Qt5Core.dll DESTINATION "./")
        endif()
        if (NOT "${Qt5Gui_VERSION}" STREQUAL "")
            install (FILES ${CMAKE_PREFIX_PATH}/bin/Qt5Gui.dll DESTINATION "./")
        endif()
        if (NOT "${Qt5Widgets_VERSION}" STREQUAL "")
            install (FILES ${CMAKE_PREFIX_PATH}/bin/Qt5Widgets.dll DESTINATION "./")
        endif()


        if (NOT "${Qt6Core_VERSION}" STREQUAL "")
            install (FILES ${CMAKE_PREFIX_PATH}/bin/Qt6Core.dll DESTINATION "./")
        endif()
    endif()
endfunction()

# install (FILES ${CMAKE_PREFIX_PATH}/bin/Qt5Widgets.dll DESTINATION "./")
# install (FILES ${CMAKE_PREFIX_PATH}/bin/Qt5Gui.dll DESTINATION "./")
# install (FILES ${CMAKE_PREFIX_PATH}/bin/Qt5Core.dll DESTINATION "./")
# install (FILES ${CMAKE_PREFIX_PATH}/bin/Qt5OpenGL.dll DESTINATION "./")
# install (FILES ${CMAKE_PREFIX_PATH}/bin/Qt5Svg.dll DESTINATION "./")
# install (FILES ${CMAKE_PREFIX_PATH}/bin/Qt5Sql.dll DESTINATION "./")
# install (FILES ${CMAKE_PREFIX_PATH}/bin/Qt5Script.dll DESTINATION "./")
# install (FILES ${CMAKE_PREFIX_PATH}/bin/Qt5ScriptTools.dll DESTINATION "./")
# install (FILES ${CMAKE_PREFIX_PATH}/bin/Qt5Network.dll DESTINATION "./")
# install (FILES ${CMAKE_PREFIX_PATH}/plugins/platforms/qwindows.dll DESTINATION platforms)
# install (FILES ${CMAKE_PREFIX_PATH}/plugins/imageformats/qjpeg.dll DESTINATION imageformats)
# install (FILES ${CMAKE_PREFIX_PATH}/plugins/imageformats/qtiff.dll DESTINATION imageformats)
# install (FILES ${CMAKE_PREFIX_PATH}/plugins/imageformats/qico.dll DESTINATION imageformats)
# install (FILES ${CMAKE_PREFIX_PATH}/plugins/imageformats/qgif.dll DESTINATION imageformats)
# install (FILES ${CMAKE_PREFIX_PATH}/plugins/sqldrivers/qsqlite.dll DESTINATION sqldrivers)
